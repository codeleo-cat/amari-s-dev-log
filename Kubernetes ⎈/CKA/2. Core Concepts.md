(3h 38m)
# worker node : host application as containers
- kubelet : listen from Kuber-api server, monitor status of node
- kuber-proxy : forward traffic

# Master : master, plan, schedule, monitor nodes
- Kube-apiserver : Primary Management element. manipulate whole API objects in K8s (pods, namespaces, configmaps...)
- Kube Controller-Manager
- ETCD cluster : key-value data store.
- kube-scheduler : scheduling pods on node (which pod goes which nodes)

**K8s Runtime**
- Docker (only supported runtime, at first) &rarr;  X (since v.1.20~)
	&rarr; CRI(Container Runtime Interface)와의 호환성 X & K8s에서 사용하지 않는 기능이 많아서 overhead 발생. 
	하지만 런타임으로 지원하지 않는 것이지, docker image는 계속 사용 가능함.
- **Container d**

```bash
kubectl get nodes
```

# Yaml
주 구성 요소 : apiVersion / kind / metadata / spec

kubectl *apply* -f pod-definition.yml > 
pod/nginx created

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx
  labels:
    app: nginx
    tier: front-end
spec:
  containers:
    - name: nginx
      image: nginx
    - name: busybox
      image: busybox
```

- `apiVersion: v1`: Kubernetes API의 첫 번째 버전을 사용함.
- `kind: Pod`: 이 파일은 Pod을 생성함. (It can be Pod, Service, Deployment, ReplicaSet ...)
- `metadata`: 이 Pod의 메타데이터를 지정함. Pod의 이름을 "nginx"로 지정함.
- `spec`: 이 Pod의 원하는 상태를 지정함. 
    - `containers`: 이 Pod에 포함될 컨테이너를 정의함.
        - `name: nginx`: 이 컨테이너의 이름을 "nginx"로 지정함.
        - `image: nginx`: 이 컨테이너가 사용할 Docker 이미지를 지정함. (nginx 사용)

---
- Practice Test - PODs
```
kubectl get po
kubectl delete po webapp
kubectl run nginx --image nginx
kubectl describe pod {name}
kubectl get po -o wide (pod들이 속한 node 확인 가능)
kubectl get po
READY : running pod number/total pod number (ex. 1/2)
kubectl run {Name} --image={Image name} --dry-run=client -o yaml > redis-def.yaml
kubectl create -f redis-def.yaml
kubectl edit pod {Name} # 수정
kubectl apply -f redis-def.yaml # 수정사항 적용
```

- ReplicaSets
```
kubectl get rs
kubectl describe rs ${rsName}
kubectl get rs -o wide
kubectl describe pods (왜 문제 생겼니~ 유형)
kubectl api-resources | grep replicaset (yaml file fix 할 때 체크)
kubectl create -f /root/replicaset-definition-1.yaml 
kubectl edit rs ${rsName}
kubectl scale rs ${rsName} --replicas=5
```
```yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: replicaset-2
spec:
  replicas: 2
  selector:
    matchLabels:
      tier: frontend   # template - labels 와 일치해야 함.
  template:
    metadata:
      labels:
        tier: frontend
    spec:
      containers:
      - name: nginx
        image: nginx
```

---
etc

![[CKA 문제유형1.png]]